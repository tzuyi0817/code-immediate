/* esm.sh - solid-js@1.9.10/html (https://esm.sh/solid-js@1.9.10/es2022/html.mjs) */
import{effect as M,style as q,insert as z,untrack as U,spread as B,createComponent as H,delegateEvents as Z,classList as F,mergeProps as K,dynamicProperty as J,setAttribute as Q,setAttributeNS as X,addEventListener as Y,Aliases as ee,getPropAlias as te,Properties as re,ChildProperties as se,DelegatedEvents as ne,SVGElements as ce,SVGNamespace as le}from"./web.mjs";var ue=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,ae=/(?:\s(?<boolean>[^/\s><=]+?)(?=[\s/>]))|(?:(?<name>\S+?)(?:\s*=\s*(?:(['"])(?<quotedValue>[\s\S]*?)\3|(?<unquotedValue>[^\s>]+))))/g,ie={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};function pe(n){let c={type:"tag",name:"",voidElement:!1,attrs:[],children:[]},i=n.match(/<\/?([^\s]+?)[/\s>]/);if(i&&(c.name=i[1],(ie[i[1].toLowerCase()]||n.charAt(n.length-2)==="/")&&(c.voidElement=!0),c.name.startsWith("!--"))){let $=n.indexOf("-->");return{type:"comment",comment:$!==-1?n.slice(4,$):""}}let p=new RegExp(ae);for(let $ of n.matchAll(p))($[1]||$[2]).startsWith("use:")?c.attrs.push({type:"directive",name:$[1]||$[2],value:$[4]||$[5]||""}):c.attrs.push({type:"attr",name:$[1]||$[2],value:$[4]||$[5]||""});return c}function O(n,c,i){let p=c.indexOf("<",i),$=c.slice(i,p===-1?void 0:p);/^\s*$/.test($)||n.push({type:"text",content:$})}function k(n,c){let i=c.replace("<!--","").replace("-->","");/^\s*$/.test(i)||n.push({type:"comment",content:i})}function fe(n){let c=[],i,p=-1,$=[],P={};return n.replace(ue,(x,S)=>{let w=x.charAt(1)!=="/",y=x.slice(0,4)==="<!--",E=S+x.length,b=n.charAt(E),v;w&&!y&&(p++,i=pe(x),!i.voidElement&&b&&b!=="<"&&O(i.children,n,E),P[i.tagName]=i,p===0&&c.push(i),v=$[p-1],v&&v.children.push(i),$[p]=i),y&&(p<0?k(c,x):k($[p].children,x)),(y||!w||i.voidElement)&&(y||p--,b!=="<"&&b&&(v=p===-1?c:$[p].children,O(v,n,E)))}),c}function he(n){let c=[];for(let i of n)c.push(i.name+'="'+i.value.replace(/"/g,"&quot;")+'"');return c.length?" "+c.join(" "):""}function T(n,c){switch(c.type){case"text":return n+c.content;case"tag":return n+="<"+c.name+(c.attrs?he(c.attrs):"")+(c.voidElement?"/>":">"),c.voidElement?n:n+c.children.reduce(T,"")+"</"+c.name+">";case"comment":return n+="<!--"+c.content+"-->"}}function me(n){return n.reduce(function(c,i){return c+T("",i)},"")}var _=new Map,$e=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i,A=" \\f\\n\\r\\t",V="[^"+A+`\\/>"'=]+`,I="[ "+A+"]+(?:use:<!--#-->|"+V+")",D="<([A-Za-z$#]+[A-Za-z0-9:_-]*)((?:",R=`(?:\\s*=\\s*(?:'[^']*?'|"[^"]*?"|\\([^)]*?\\)|<[^>]*?>|`+V+"))?)",de=new RegExp(D+I+R+"+)([ "+A+"]*/?>)","g"),oe=new RegExp("("+I+`\\s*=\\s*)(<!--#-->|['"(]([\\w\\s]*<!--#-->[\\w\\s]*)*['")])`,"gi"),ge=new RegExp(D+I+R+"*)([ "+A+"]*/>)","g"),L="<!--#-->",xe=new Set(["class","on","oncapture","style","use","prop","attr"]);function ye(n,c,i,p){return"<"+c+i.replace(oe,Ee)+p}function Ee(n,c,i){return c.replace(/<!--#-->/g,"###")+(i[0]==='"'||i[0]==="'"?i.replace(/<!--#-->/g,"###"):'"###"')}function ve(n,c,i){return $e.test(c)?n:"<"+c+i+"></"+c+">"}function Ce(n){return n.toLowerCase().replace(/-([a-z])/g,(c,i)=>i.toUpperCase())}function j(n,c,i,p){if(n==="use:###"&&c==="###"){let $=p.counter++;p.exprs.push(`typeof exprs[${$}] === "function" ? r.use(exprs[${$}], ${i}, exprs[${p.counter++}]) : (()=>{throw new Error("use:### must be a function")})()`)}else throw new Error(`Not support syntax ${n} must be use:{function}`)}function be(n,{delegateEvents:c=!0,functionBuilder:i=(...p)=>new Function(...p)}={}){let p=1;n.wrapProps=r=>{let e=Object.getOwnPropertyDescriptors(r);for(let t in e)typeof e[t].value=="function"&&!e[t].value.length&&n.dynamicProperty(r,t);return r};function $(r,e){let t=0,a="";for(;t<r.length-1;t++)a=a+r[t]+"<!--#-->";a=a+r[t],a=[[ge,ve],[/<(<!--#-->)/g,"<###"],[/\.\.\.(<!--#-->)/g,"###"],[de,ye],[/>\n+\s*/g,">"],[/\n+\s*</g,"<"],[/\s+</g," <"],[/>\s+/g,"> "]].reduce((h,m)=>h.replace(m[0],m[1]),a);let d=fe(a),[l,s]=b(d,e.funcBuilder),u=[];for(let h=0;h<l.length;h++){u.push(document.createElement("template")),u[h].innerHTML=l[h];let m=u[h].content.querySelectorAll("script,style");for(let g=0;g<m.length;g++){let o=m[g].firstChild?.data||"";if(o.indexOf(L)>-1){let N=o.split(L).reduce((C,W,G)=>(G&&C.push(""),C.push(W),C),[]);m[h].firstChild.replaceWith(...N)}}}return u[0].create=s,_.set(r,u),u}function P(r,e,t,a,f,d,l){let s=a==="###"?`!doNotWrap ? exprs[${l.counter}]() : exprs[${l.counter++}]`:a.split("###").map((o,N)=>N?` + (typeof exprs[${l.counter}] === "function" ? exprs[${l.counter}]() : exprs[${l.counter++}]) + "${o}"`:`"${o}"`).join(""),u,h;(u=t.split(":"))&&u[1]&&xe.has(u[0])&&(t=u[1],h=u[0]);let m=n.ChildProperties.has(t),g=n.Properties.has(t);if(t==="style"){let o=`_$v${p++}`;l.decl.push(`${o}={}`),l.exprs.push(`r.style(${e},${s},${o})`)}else if(t==="classList"){let o=`_$v${p++}`;l.decl.push(`${o}={}`),l.exprs.push(`r.classList(${e},${s},${o})`)}else if(h!=="attr"&&(m||!f&&(n.getPropAlias(t,r.name.toUpperCase())||g)||d||h==="prop"))d&&!m&&!g&&h!=="prop"&&(t=Ce(t)),l.exprs.push(`${e}.${n.getPropAlias(t,r.name.toUpperCase())||t} = ${s}`);else{let o=f&&t.indexOf(":")>-1&&n.SVGNamespace[t.split(":")[0]];o?l.exprs.push(`r.setAttributeNS(${e},"${o}","${t}",${s})`):l.exprs.push(`r.setAttribute(${e},"${n.Aliases[t]||t}",${s})`)}}function x(r,e,t,a,f,d,l){if(t.slice(0,2)==="on")if(t.includes(":")){let s=t.startsWith("oncapture:");l.exprs.push(`${e}.addEventListener("${t.slice(s?10:3)}",exprs[${l.counter++}]${s?",true":""})`)}else{let s=t.slice(2).toLowerCase(),u=c&&n.DelegatedEvents.has(s);l.exprs.push(`r.addEventListener(${e},"${s}",exprs[${l.counter++}],${u})`),u&&l.delegatedEvents.add(s)}else if(t==="ref")l.exprs.push(`exprs[${l.counter++}](${e})`);else{let s=Object.assign({},l,{exprs:[]}),u=l.counter;if(P(r,e,t,a,f,d,s),l.decl.push(`_fn${u} = (${a==="###"?"doNotWrap":""}) => {
${s.exprs.join(`;
`)};
}`),a==="###")l.exprs.push(`typeof exprs[${u}] === "function" ? r.effect(_fn${u}) : _fn${u}(true)`);else{let h="";for(let m=u;m<s.counter;m++)m!==u&&(h+=" || "),h+=`typeof exprs[${m}] === "function"`;l.exprs.push(h+` ? r.effect(_fn${u}) : _fn${u}()`)}l.counter=s.counter,l.wrap=!1}}function S(r,e){let t=Object.assign({},e,{first:!0,multi:!1,parent:e.path});if(r.children.length>1)for(let f=0;f<r.children.length;f++){let d=r.children[f];if(d.type==="comment"&&d.content==="#"||d.type==="tag"&&d.name==="###"){t.multi=!0;break}}let a=0;for(;a<r.children.length;){let f=r.children[a];if(f.name==="###"){t.multi?(r.children[a]={type:"comment",content:"#"},a++):r.children.splice(a,1),y(f,t);continue}E(f,t),!t.multi&&f.type==="comment"&&f.content==="#"?r.children.splice(a,1):a++}e.counter=t.counter,e.templateId=t.templateId,e.hasCustomElement=e.hasCustomElement||t.hasCustomElement,e.isImportNode=e.isImportNode||t.isImportNode}function w(r){let e=[];for(let t of r)if(Array.isArray(t)){if(!t.length)continue;e.push(`r.wrapProps({${t.join(",")||""}})`)}else e.push(t);return e.length>1?`r.mergeProps(${e.join(",")})`:e[0]}function y(r,e){let t=[],a=Object.keys(r.attrs),f=[t],d=e.counter++;for(let s=0;s<a.length;s++){let{type:u,name:h,value:m}=r.attrs[s];if(u==="attr")h==="###"?(f.push(`exprs[${e.counter++}]`),f.push(t=[])):m==="###"?t.push(`"${h}": exprs[${e.counter++}]`):t.push(`"${h}": "${m}"`);else if(u==="directive"){let g=`_$el${p++}`,o=!e.decl.length;e.decl.push(o?"":`${g} = ${e.path}.${e.first?"firstChild":"nextSibling"}`),j(h,m,g,e)}}if(r.children.length===1&&r.children[0].type==="comment"&&r.children[0].content==="#")t.push(`children: () => exprs[${e.counter++}]`);else if(r.children.length){let s={type:"fragment",children:r.children},u=Object.assign({},e,{first:!0,decl:[],exprs:[],parent:!1});E(s,u),t.push(`children: () => { ${u.exprs.join(`;
`)}}`),e.templateId=u.templateId,e.counter=u.counter}let l;e.multi&&(l=`_$el${p++}`,e.decl.push(`${l} = ${e.path}.${e.first?"firstChild":"nextSibling"}`)),e.parent?e.exprs.push(`r.insert(${e.parent}, r.createComponent(exprs[${d}],${w(f)})${l?`, ${l}`:""})`):e.exprs.push(`${e.fragment?"":"return "}r.createComponent(exprs[${d}],${w(f)})`),e.path=l,e.first=!1}function E(r,e){if(r.type==="fragment"){let t=[];r.children.forEach(a=>{if(a.type==="tag"){if(a.name==="###"){let l=Object.assign({},e,{first:!0,fragment:!0,decl:[],exprs:[]});y(a,l),t.push(l.exprs[0]),e.counter=l.counter,e.templateId=l.templateId;return}e.templateId++;let f=p,d=Object.assign({},e,{first:!0,decl:[],exprs:[]});e.templateNodes.push([a]),E(a,d),t.push(`function() { ${d.decl.join(`,
`)+`;
`+d.exprs.join(`;
`)+`;
return _$el${f};
`}}()`),e.counter=d.counter,e.templateId=d.templateId}else if(a.type==="text")t.push(`"${a.content}"`);else if(a.type==="comment"){if(a.content==="#")t.push(`exprs[${e.counter++}]`);else if(a.content)for(let f=0;f<a.content.split("###").length-1;f++)t.push(`exprs[${e.counter++}]`)}}),e.exprs.push(`return [${t.join(`, 
`)}]`)}else if(r.type==="tag"){let t=`_$el${p++}`,a=!e.decl.length,f=e.templateId;e.decl.push(a?"":`${t} = ${e.path}.${e.first?"firstChild":"nextSibling"}`);let d=n.SVGElements.has(r.name),l=r.name.includes("-")||r.attrs.some(s=>s.name==="is");if(e.hasCustomElement=l,e.isImportNode=(r.name==="img"||r.name==="iframe")&&r.attrs.some(s=>s.name==="loading"&&s.value==="lazy"),r.attrs.some(s=>s.name==="###")){let s=[],u="",h=[];for(let m=0;m<r.attrs.length;m++){let{type:g,name:o,value:N}=r.attrs[m];if(g==="attr")if(N.includes("###")){let C=e.counter++;u+=`${o}: ${o!=="ref"?`typeof exprs[${C}] === "function" ? exprs[${C}]() : `:""}exprs[${C}],`}else o==="###"?(u.length&&(s.push(`()=>({${u}})`),u=""),s.push(`exprs[${e.counter++}]`)):h.push(r.attrs[m]);else g==="directive"&&j(o,N,t,e)}r.attrs=h,u.length&&s.push(`()=>({${u}})`),e.exprs.push(`r.spread(${t},${s.length===1?`typeof ${s[0]} === "function" ? r.mergeProps(${s[0]}) : ${s[0]}`:`r.mergeProps(${s.join(",")})`},${d},${!!r.children.length})`)}else for(let s=0;s<r.attrs.length;s++){let{type:u,name:h,value:m}=r.attrs[s];u==="directive"?(j(h,m,t,e),r.attrs.splice(s,1),s--):u==="attr"&&m.includes("###")&&(r.attrs.splice(s,1),s--,x(r,t,h,m,d,l,e))}e.path=t,e.first=!1,S(r,e),a&&(e.decl[0]=e.hasCustomElement||e.isImportNode?`const ${t} = r.untrack(() => document.importNode(tmpls[${f}].content.firstChild, true))`:`const ${t} = tmpls[${f}].content.firstChild.cloneNode(true)`)}else if(r.type==="text"){let t=`_$el${p++}`;e.decl.push(`${t} = ${e.path}.${e.first?"firstChild":"nextSibling"}`),e.path=t,e.first=!1}else if(r.type==="comment"){let t=`_$el${p++}`;e.decl.push(`${t} = ${e.path}.${e.first?"firstChild":"nextSibling"}`),r.content==="#"&&(e.multi?e.exprs.push(`r.insert(${e.parent}, exprs[${e.counter++}], ${t})`):e.exprs.push(`r.insert(${e.parent}, exprs[${e.counter++}])`)),e.path=t,e.first=!1}}function b(r,e){let t={path:"",decl:[],exprs:[],delegatedEvents:new Set,counter:0,first:!0,multi:!1,templateId:0,templateNodes:[]},a=p,f=r,d;return r.length>1&&(r=[{type:"fragment",children:r}]),r[0].name==="###"?(d=!0,y(r[0],t)):E(r[0],t),n.delegateEvents(Array.from(t.delegatedEvents)),[[f].concat(t.templateNodes).map(s=>me(s)),e("tmpls","exprs","r",t.decl.join(`,
`)+`;
`+t.exprs.join(`;
`)+(d?"":`;
return _$el${a};
`))]}function v(r,...e){let t=_.get(r)||$(r,{funcBuilder:i});return t[0].create(t,e,n)}return v}var we=be({effect:M,style:q,insert:z,untrack:U,spread:B,createComponent:H,delegateEvents:Z,classList:F,mergeProps:K,dynamicProperty:J,setAttribute:Q,setAttributeNS:X,addEventListener:Y,Aliases:ee,getPropAlias:te,Properties:re,ChildProperties:se,DelegatedEvents:ne,SVGElements:ce,SVGNamespace:le});export{we as default};
//# sourceMappingURL=html.mjs.map